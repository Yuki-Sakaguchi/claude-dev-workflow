# レビューコメントテンプレート

## 概要

`/auto-review` コマンドでClaude Codeが生成するレビューコメントの統一フォーマットです。
GitHub PR投稿用に最適化され、個人開発における学習効果と品質向上を重視した構成となっています。

## 基本フォーマット

### レビュー完了時の基本構造
```markdown
## 🔍 自動レビュー結果

### 📊 概要
- **対象**: {PR番号 or ブランチ名}
- **機能**: {実装機能名}
- **重要度**: {Critical/Important/Normal}
- **判定**: {✅承認 / ⚠️修正要求}

### 🏆 評価サマリー
- **コード品質**: {A/B/C評価}
- **セキュリティ**: {✅問題なし / ⚠️要注意 / 🚫要修正}
- **テストカバレッジ**: {XX.X%}
- **ドキュメント**: {✅更新済み / ⚠️要更新}

{詳細レビュー内容}

---
*Reviewed by Claude Code - 開発フロー自動化システム*
```

## 承認時のテンプレート

### ✅ 承認（問題なし）
```markdown
## ✅ レビュー完了：承認

### 📊 概要
- **対象**: PR #{番号} - {機能名}
- **重要度**: {Critical/Important/Normal}
- **総合評価**: ✅ **承認** - 品質基準を満たしています

### 🏆 評価ポイント
- ✅ **コード品質**: 適切な命名規則と可読性
- ✅ **設計**: 責務分離と拡張性を考慮
- ✅ **テスト**: カバレッジ{XX.X%} - 十分な網羅性
- ✅ **セキュリティ**: 脆弱性なし
- ✅ **ドキュメント**: 適切に更新済み

### 💡 改善提案（任意）
{Minor改善案があれば記載}

### 📚 学習ポイント
{良いコード例や学習効果の高い実装があれば紹介}

**Great job! この品質レベルを維持していきましょう** 🎉

---
*Reviewed by Claude Code - 自動品質チェック完了*
```

### ✅ 承認（Minor改善案あり）
```markdown
## ✅ レビュー完了：承認（改善案あり）

### 📊 概要
- **対象**: PR #{番号} - {機能名}
- **総合評価**: ✅ **承認** - 基本品質は満たしているが、さらなる改善余地あり

### 🏆 評価ポイント
- ✅ **機能性**: アクセプタンス基準を満たしている
- ✅ **テスト**: 必要な範囲をカバー
- ✅ **セキュリティ**: 問題なし

### 💡 改善提案（推奨）

#### 💡 Minor: 変数名の明確化
**ファイル**: `{ファイルパス}:{行番号}`
```javascript
// 現在
const data = response.data;

// 提案
const userProfileData = response.data;
```
**理由**: より具体的な名前により、コードの意図が明確になります

#### 💡 Minor: 関数の分割
**ファイル**: `{ファイルパス}:{行番号}`
**提案**: 30行の関数を責務別に2つに分割することで、テストしやすくなります

### 📚 学習ポイント
{良い実装例があれば紹介}

**マージ可能です。改善案は次回以降の参考にしてください** ✨

---
*Reviewed by Claude Code*
```

## 修正要求時のテンプレート

### ⚠️ 修正要求（Major問題）
```markdown
## ⚠️ レビュー完了：修正要求

### 📊 概要
- **対象**: PR #{番号} - {機能名}
- **総合評価**: ⚠️ **修正要求** - 重要な問題があるため修正が必要です

### 🚫 修正必須項目

#### 🚫 Critical: {問題カテゴリ}
**ファイル**: `{ファイルパス}:{行番号}`
**問題**: {具体的な問題内容}

**現在のコード**:
```javascript
{問題のあるコード}
```

**修正案**:
```javascript
{修正後のコード例}
```

**理由**: {なぜ修正が必要なのかの詳細説明}
**参考**: [関連ドキュメントのリンク]

#### ⚠️ Major: {問題カテゴリ}
{同様の形式で記載}

### 💡 改善推奨項目

#### 💡 Minor: {改善案}
{任意の改善案}

### 🔄 次のステップ
1. 上記の修正必須項目を対応
2. 修正完了後、`/auto-review {PR番号}` で再レビュー実行
3. 質問があれば遠慮なくお聞かせください

**修正後の再レビューをお待ちしています** 💪

---
*Reviewed by Claude Code*
```

### 🚫 修正要求（Critical問題）
```markdown
## 🚫 レビュー完了：緊急修正要求

### 📊 概要
- **対象**: PR #{番号} - {機能名}
- **総合評価**: 🚫 **緊急修正要求** - セキュリティ・品質に重大な問題

### 🚨 緊急修正必須項目

#### 🚫 Critical: セキュリティ脆弱性
**ファイル**: `{ファイルパス}:{行番号}`
**問題**: SQLインジェクション脆弱性が存在します

**リスク**: 
- データベースの不正操作
- 機密情報の漏洩
- システム全体への影響

**現在のコード**:
```javascript
const query = `SELECT * FROM users WHERE email = '${email}'`;
```

**修正案**:
```javascript
const query = 'SELECT * FROM users WHERE email = ?';
const result = await database.query(query, [email]);
```

**参考**: [OWASP SQL Injection Prevention](https://owasp.org/www-community/attacks/SQL_Injection)

### ⏰ 対応期限
このPRはセキュリティリスクがあるため、**即座の修正**が必要です。
修正完了まで本番環境へのマージは控えてください。

### 🆘 サポート
修正方法に不明な点があれば、遠慮なく質問してください。
セキュリティ問題の解決を最優先でサポートします。

---
*⚠️ Security Alert by Claude Code*
```

## 特殊ケース用テンプレート

### 📋 初回レビュー（大規模PR）
```markdown
## 🔍 初回レビュー：大規模変更

### 📊 概要
- **対象**: PR #{番号} - {機能名}
- **変更規模**: {変更ファイル数}ファイル、{変更行数}行
- **レビュー方針**: 段階的レビューを実施

### 🎯 重点確認項目
1. **アーキテクチャ設計**: 全体的な設計方針
2. **セキュリティ**: 新規導入機能の安全性
3. **パフォーマンス**: 大規模変更による影響
4. **テスト戦略**: 適切な網羅性

### 📝 詳細レビュー
{段階的にレビュー内容を記載}

### 🔄 レビュー進行
大規模変更のため、以下の順序で段階的にレビューを進めます：
1. 設計・アーキテクチャの確認
2. セキュリティ・パフォーマンスの確認  
3. 詳細実装の確認

---
*Large-scale Review by Claude Code*
```

### 🔄 再レビュー時
```markdown
## 🔄 再レビュー結果

### 📊 概要
- **対象**: PR #{番号} - {機能名}
- **前回レビュー**: {前回の日時}
- **修正状況**: {修正完了 / 一部修正 / 未修正}

### ✅ 修正確認済み
- [x] Critical: SQLインジェクション脆弱性 → ✅ 修正完了
- [x] Major: エラーハンドリング → ✅ 修正完了

### ⚠️ 新たな確認事項
{新しく発見された問題があれば記載}

### 🎉 最終判定
{承認 or 追加修正要求}

**修正対応ありがとうございました！** 👏

---
*Re-reviewed by Claude Code*
```

## エラー・例外時のテンプレート

### ❌ レビュー実行エラー
```markdown
## ❌ レビュー実行エラー

### 🚨 エラー内容
PR情報の取得に失敗しました。

### 🔧 対処方法
1. PR番号・ブランチ名の確認
2. アクセス権限の確認
3. 手動レビューでの代替実行

### 🆘 サポート
問題が解決しない場合は、以下の情報と共にお知らせください：
- 対象PR番号またはブランチ名
- エラーが発生した時刻
- 実行した操作の詳細

---
*Error Report by Claude Code*
```

### ⏳ レビュー中断時
```markdown
## ⏳ レビュー一時中断

### 📋 中断理由
{中断理由 - 複雑な問題の詳細調査が必要等}

### 🔍 現在の進捗
- ✅ 基本品質チェック: 完了
- ⏳ セキュリティレビュー: 調査中
- ⏸️ パフォーマンス確認: 未実施

### 🔄 再開予定
{再開予定時刻または条件}

---
*Review Paused by Claude Code*
```

## カスタマイズガイド

### プロジェクト固有の調整
- **評価基準**: プロジェクトの品質要件に応じて調整
- **重要度判定**: ビジネス要件に応じてCritical機能を定義
- **学習ポイント**: チームの技術レベルに応じてフォーカス調整

### GitHub連携強化
- **ラベル自動付与**: `needs-review`, `security-issue` 等
- **アサイン機能**: 修正担当者の自動アサイン
- **マイルストーン連携**: リリース計画との連動